---
title: 로그인 만료
date: '2023-02-24'
tags: ['javascript', '로그인 만료']
draft: false
summary: '로그인 관련 정리'
---

# Refresh Token

```
__

[ 브라우저 ]

변수: accessToken

쿠키: refreshToken
(httpOnly - 자바스크립트 접근 불가)
(secure - 자물쇠(https))

<토큰만료시 대응법>
1. 토큰만료 에러 - 토큰만료시 에러 체크
2. 토큰 재발급 - refreshToken 을 통해 재발급
3. 실패했던 query 재시도

[refreshToken 으로 인가하여 accessToken을 받은후]
ㄴ recoil 에 접근하여 globalState 에 새로운 accessToken 을 저장

__
^ 
|
| 
|
v
__

[ 백엔드 ]

[login] -- 엑세스/리프레시 인증(Authentication) 
ㄴ accessToken(1h)
ㄴ refreshToken(2w)

[restoreAccessToken] -- 리프레시 인가
ㄴ refreshToken 을 받아 새로운 accessToken 발급

[fetchProfil] -- 엑세스 인가(Authorization)

__
|
|
|
[ DB ]

```

## silentAuthentication
> 위의 과정은 지속 통신이 일어나지만, 사용자는 이러한 통신이 일어나는지 모른다. 그렇기에 조용한 인증 연장 이라 부른다.

 
## Micro Service Arcitatuer(MSA)

### AuthService

### Resource Service

#### ProfileService
#### BoardService

## OAuthentication


